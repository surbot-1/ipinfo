<!DOCTYPE html>
<html>
<head>
    <title>editApp</title>
</head>
    

  
<body>
  
<center>
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
<div id="div4"></div>
<div id="div5"></div>
<div id="div6"></div>
</center> 
    
  <!--  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
 <input class="ip" value=dIP2>
<button class="send">Go</button>
<br><br>

<span class="city"></span>, 
<span class="country"></span>
   --> 

<script src="script.js"> </script>
   
  <!--
<script src="https://cdn.jsdelivr.net/gh/joeymalvinni/webrtc-ip/dist/production.min.js"></script>
<!---- OR use the dev bundle: ----->
<!-- <script src="https://cdn.jsdelivr.net/gh/joeymalvinni/webrtc-ip/dist/bundle.dev.js"></script>
    -->
    
 <!--  
 <script src="https://cdn.jsdelivr.net/gh/joeymalvinni/webrtc-ip/dist/bundle.dev.js"></script>
 --> 
  
 <!--
 <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
 -->
    
  <script>
      
      
    
  /*  $.get("http://ipinfo.info", function(response) {
        var dIP = response.ip;
        alert(response.ip);
        }, "json")  */
      
      
          //  getIP(); 
           // var dIP;
 /*  function getIP() {
            // dIP = getIPs().then(res => document.write(res.join('\n')))
          // getIPs().then(res => document.getElementById("div1").innerHTML+= res) 
             // dIP = res.join('\n');
           // document.getElementById("div1").innerHTML+=dIP;
              } */
      
      
      
     // var res;
   /*   getIPs().then(res => {dIP = res}, 
                      // dIP = res;
                     //   return res;
         { document.getElementById("div1").innerHTML+="IP"+res
                           })
      
     // setInterval (function() {
        document.getElementById("div1").innerHTML+="<br>"+"IP"+dIP;
    //  }, 5000) ; */
      
      
      
      
  /*    // Using Promises:
  getIPs().then(data=>{
  console.log(data.join('\n'))
  })  */
      
       getIP();
      function getIP() {
         /* window.onload = */ (async function () {
          let data = await getIPs();
             for(let i = 0; i < data.length; i++){
              document.getElementById('div6').innerHTML += `<li>${data[i]}</li>`
          }
         })();
       }  
      
       function detectNavigator() { 
                  if (navigator.onLine) {
                      detect=true;
                      } else {
                         detect=false;
                         ipReceived=false;
                          }
                     }
      
        var detect=false;
        var ipReceived=false;
        function detectOnline() {
                 // detectNavigator();
                      if (!navigator.onLine) {
                        ipReceived=false;
                         }
                        if   (navigator.onLine)  {
                        if(!ipReceived){
                          getIP();
                          ipReceived=true;
                         }
                       }
                     } 
                     
                     
          setInterval(detectOnline,1000);
        
   
          
            
    /*
     var dIP1 ;
     var dIP2 ;
     var dIP ;
      
     var detect=false;
     var previousOnline=false;
     var ipReceived=false;
      
      var data = null ;
      
    
  
    
            getIP();
    function getIP() {
       
   // Using Async/Await:
     // var data ;
   (async function(){
          data = await getIPs();
       
           dIP1 = data[0];
           dIP2 = data[1];
           dIP = data;
           writeIP();  
           
          })();
         }
          var t1 = setInterval( function() {
      if( data[1] != null ) {
           dIP1 = data[0];
           dIP2 = data[1];
           dIP = data;
           writeIP();
           ipReceived=true;
           clearInterval(t1);
           clearInterval(t2);
            }  else if( data[1] = null   ) {
                ipReceived=false;
                }
          document.getElementById("div5").innerHTML+="<br>"+"IP "+"<br>"+data+"<br>"+dIP+"<br>"+dIP1+"<br>"+dIP2;
           }, 0100);
       
       var t2 = setInterval( function() {
            if( !ipReceived) {
               // clearInterval(t1);
                getIP();
                }  else if(ipReceived) {
                   clearInterval(t1);
                   clearInterval(t2);
                   }
           }, 5000) ;
       
       // })();
      //}   */
       
  /*   while( data[0] == null || data[1] == null) {
       if( data[0] != null && data[1] != null) {break;}
      } */
       
     /*  if( data[0] != null) {
           dIP1 = data[0];
           dIP2 = data[1];
           dIP = data;
           writeIP();
           ipReceived=true;
            }  */
        /*   dIP1 = data[0];
           dIP2 = data[1];
           dIP = data;
           writeIP();  */
       
      
    /*  var t = setInterval( function() {
      if( data[1] != null && data[1] != false ) {
           dIP1 = data[0];
           dIP2 = data[1];
           dIP = data;
           writeIP();
           ipReceived=true;
           clearInterval(t);
            } // else if( !ipReceived) {
               // getIP();
               // }
          document.getElementById("div2").innerHTML+="<br">+"IP0 "+dIP;
           }, 1000); */
      
      //  writeIP();
      function writeIP() {
          document.getElementById("div1").innerHTML+="<br>"+"IP "+data;
          document.getElementById("div2").innerHTML+="<br>"+"IP0 "+dIP;
          document.getElementById("div3").innerHTML+="<br>"+"IP1 "+dIP1;
          document.getElementById("div4").innerHTML+="<br>"+"IP2 "+dIP2;
          }
      
  
/*   var t = setInterval( function() {
          if( data[0] != false && data[1] != false) {
              dIP1 = data[0];
              dIP2 = data[1];
              dIP = dIP1+" "+dIP2;
              ipReceived=true;
              }
             }, 1000);
     setTimeout(function() {
         clearInterval(t);
         }, 4000);  */
            
    //  dIP1 = data[0];
    //  dIP2 = data[1];
    //  dIP = data;
    //  dIP = dIP1+" "+dIP2;
     //  writeIP();
      
    
      
      
      /*    //  writeIP();
      function writeIP() {
         // document.getElementById("div1").innerHTML+="<br>"+"IP "+data;
         //  document.getElementById("div2").innerHTML+="<br>"+"IP0 "+dIP;
         //  document.getElementById("div3").innerHTML+="<br>"+"IP1 "+dIP1;
          document.getElementById("div4").innerHTML+="<br>"+"IP2 "+dIP2;
          }  */
      
      
    
         
 /*     setInterval( detectOnline , 5000);  
      
               //  var detect=false;
               //  var previousOnline=false;
               //  var ipReceived=false;
      
      function detectNavigator() { 
                  if (navigator.onLine) {
                      detect=true;
                      } else {
                         detect=false;
                         previousOnline=false;
                          }
                     }
                  
        function detectOnline() {
              detectNavigator();
                if (detect) {
                if(!previousOnline) { 
                     if(!ipReceived){
                     getIP();
                     previousOnline=true;
                     ipReceived=true;
                      }
                     }
                    } 
                   }   */
                      
                     
      
      
      

         
    
    
      
      
  /*  var GetIpInfo = function(ipAddr) {
    var info = null;
    var infoUrl = "http://ipinfo.io/" + ipAddr;
    $.ajax({
        url: infoUrl,
        type: 'GET',
        dataType: 'json',
        async: false,
        success: function(data) {
            info = data;
            document.getElementById("div3").innerHTML+=info;
        }
    });
    return info;
}; */
   
      
   

   
      
      
/* const canvas = document.getElementById('canv');
const ctx = canvas.getContext('2d');

const w = canvas.width = document.body.offsetWidth;
const h = canvas.height = document.body.offsetHeight;
// Get amount of collumns we can use from the width
const cols = Math.floor(w / 20) + 1;
const ypos = Array(cols).fill(0);

// Set background to black
ctx.fillStyle = '#000';
ctx.fillRect(0, 0, w, h);

function matrix () {
  ctx.fillStyle = '#0001';
  ctx.fillRect(0, 0, w, h);
  
  // Green text with terminal-like text
  ctx.fillStyle = '#00b07c';
  ctx.font = '15pt digital-7';
  
  // Add the text
  ypos.forEach((y, ind) => {
    const text = String.fromCharCode(Math.random() * 128);
    const x = ind * 20;
    ctx.fillText(text, x, y);
    if (y > 100 + Math.random() * 10000) ypos[ind] = 0;
    else ypos[ind] = y + 20;
  });
}

setInterval(matrix, 50);

// ============== 
// Get the IP address(es) and add it to the list

window.onload = async function () {
  let data = await getIPs()
  for(let i = 0; i < data.length; i++){
    document.getElementById('ips').innerHTML += `<li>${data[i]}</li>`
  }
}      */
      
      
      
      
      
      
      
 /*   var GetIpInfo = function(ipAddr) {
    var info = null;
    var infoUrl = "http://ipinfo.io/" + ipAddr;
    $.ajax({
        url: infoUrl,
        type: 'GET',
        dataType: 'json',
        async: false,
        success: function(data) {
            info = data;
            document.getElementById("div1").innerHTML = info;
        }
    });
    return info;
};  */
  
  </script>
    
  </body>
</html>
